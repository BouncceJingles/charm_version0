<!DOCTYPE html>
<html>
<head>
    <title>View Resident Activities</title>
    <link href="shared/styles/examples-offline.css" rel="stylesheet">
    <link href="styles/kendo.common.min.css" rel="stylesheet">
    <link href="styles/kendo.default.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
	<script src="js/jquery-2.0.3.js"></script>
    <script src="js/kendo.web.min.js"></script>
    <script src="shared/js/console.js"></script>
    
    <script>
    $(document).ready(function()
    {
        $("#submit").click(function()
        {
            if($("#txtNric").val()=="")
            {
                alert('Please enter NRIC');
                return false;
            }
            else
            {
                getActivities();
            }
        });
    });
    
    function getActivities(){
        $.getJSON("getactivities.php",{nric:$("#txtNric").val()},function(json)
        {
            if(json.success == 1)
            {
                setGrid(json.data);
            }
            else
            {
                alert("Error: No result found");
            }
        });
    }
    function setGrid(activitiesData){
        //alert(activitiesData);
        $("#grid").kendoGrid({
            dataSource: {
                data: activitiesData,
                schema: {
                    model: {
                        fields: {
                            datetime: { type: "string" },
                            type: { type: "string" },
                            remarks: { type: "string" }
                        }
                    }
                },
                pageSize: 20
            },
            height: 430,
            scrollable: true,
            sortable: true,
            filterable: true,
            pageable: {
                input: true,
                numeric: false
            },
            columns: [
                { field: "datetime", title: "datetime", width: "130px" },
                { field: "type", title: "Type", width: "130px" },
                { field: "remarks", title: "Remarks", width: "130px" }                 
            ]
        });
    }
    </script>
    
</head>
<body>

    <table cellspacing="0" cellpadding="0" border ="0" style="float:right"> 
    <tr>
     <th colspan="2">Get Resident Activities</th>
    </tr>
    <tr>
        <td>NRIC </td><td><input type="text" name="txtNric" id="txtNric"></td>
    </tr>
    <tr>
        <td></td><td align="left"><input type="submit" Value="Get Record" id="submit"></td>
    </tr>
    <tr>
    </table>
    
        <a class="offline-button" href="../index.html">Home</a>
        <div id="example" class="k-content">
            <div id="grid"></div>
        </div>

</body>
</html>
